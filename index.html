<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="icon" href="logo-F1.png" type="image/x-icon">
    <title>Trabajo Final - Visualización de Datos</title>
</head>
<header id="header">
  <video id="videoFondo" autoplay loop muted playsinline class="background">
    <source src="f1.mp4" type="video/mp4">
    Tu navegador no soporta este video.
  </video>
  <button id="soundButton" class="sound-toggle" title="Activar/desactivar sonido">OFF</button>
</header>

<script>
  const video = document.getElementById('videoFondo');
  const soundButton = document.getElementById('soundButton');

  // Variable para recordar la elección del usuario
  let userMuted = true; // comienza en OFF

  // Actualiza el botón según estado de sonido
  const updateButtonLabel = () => {
    soundButton.textContent = userMuted ? 'OFF' : 'ON';
  };

  // Clic en botón → alternar estado de sonido
  soundButton.addEventListener('click', () => {
    userMuted = !userMuted;
    video.muted = userMuted;
    video.play().catch(e => console.log("Error al reproducir:", e));
    updateButtonLabel();
  });

  // Observer para controlar visibilidad
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        video.currentTime = 0;
        video.muted = userMuted; // mantener estado anterior
        video.play().catch(e => console.log("Error al reproducir:", e));
      } else {
        video.pause(); // no cambiamos muted aquí
      }
      updateButtonLabel();
    });
  }, {
    threshold: 0.6
  });

  observer.observe(video);
</script>
<body> 
    <div class="container">
      <div class="one">
        <h1> Los protagonistas </h1>
        <p> Las escuderías y pilotos que marcaron la temporada 2024 con su desempeño excepcional.</p>
        <div class="flourish-embed flourish-cards" data-src="visualisation/23822396">
          <script src="https://public.flourish.studio/resources/embed.js"></script><noscript>
          <img src="https://public.flourish.studio/visualisation/23822396/thumbnail" width="100%" alt="cards visualization" /></noscript>
        </div>
      </div>

      <div class="two">
        <h1>Temporada 2024: El año <strong style="color: #FF8000;">naranja</strong></h1>
        <p>Una temporada donde cada punto definió el destino de las escuderías y marcó un capítulo inolvidable en la historia de la Fórmula 1.</p>

        <div id="burbujas">
          <div class="flourish-embed" data-src="story/3173417" data-url="https://flo.uri.sh/story/3173417/embed"data-height="100vh">
            <script src="https://public.flourish.studio/resources/embed.js"></script>
          </div>
  
          <!-- Slide 1: Victoria de McLaren -->
          <p class="highlight-section">
            <strong style="color: #FF8000;">La temporada 2024 quedó marcada en naranja</strong>, el color del renacimiento.
            McLaren volvió a reinar tras más de una década de sequía, destronando a gigantes como Red Bull y Ferrari.
            <br><br>
            <strong>6 victorias, 21 podios y 666 puntos</strong> sellaron un campeonato inolvidable para la escudería británica.
            <a href="#story/3173417/slide-1"></a>
            <img src="./campeones.avif" alt="">
          </p>

          <!-- Slide 2: Protagonistas - Equipo McLaren -->

          <p style="line-height: 1.6; font-family: 'Canva Sans Variable', sans-serif; font-size: 1rem; color: #000;">
            <span style="display: block; font-family:'Audiowide', sans-serif; font-weight: bold; font-size: 1.3rem; margin-bottom: 10px;">
              McLaren: una dupla explosiva
            </span>
            Bajo la dirección de Andrea Stella y el avance técnico del <strong>MCL38</strong>, 
            el equipo encontró el balance perfecto entre velocidad y fiabilidad. 
            <br><br>
            <span style="font-size: clamp(16px, 1.5vw, 18px); display: block; color: #FF8000; font-weight: 600; margin-bottom: 10px;">
              Más del 85% de las carreras puntuaron con ambos autos
            </span>
            Consolidando así, una estrategia de equipo que no dejó margen a errores.
            <a href="#story/3173417/slide-2"></a>
          </p>
          
         
          <p>
            <span style="font-family: 'Canva Sans Variable', sans-serif; font-size: bold;">Lando Norris y Oscar Piastri</span> Se convirtieron en los pilares de este renacer. 
            Con una combinación de juventud y experiencia, ambos pilotos demostraron que la constancia y el trabajo en equipo son la clave del éxito.
            <br><br>
            <a href="#story/3173417/slide-3"></a>
          </p>
          <!-- Slide 3: Trayectoria individual - Norris -->
          <div class="der">
            <p>
              <span>Lando Norris: La consagración de un talento</span> Desde su debut en 2019, Lando había mostrado destellos de genialidad. Pero fue en 2024 cuando, finalmente, todo se alineó. Constancia, agresividad inteligente y madurez emocional lo convirtieron en un referente indiscutido. <br>
            </p>
            <a href="#story/3173417/slide-4"></a>
          </div>

          <div class="der citaBox">
            <span>
              "Mejorar cada vuelta, cada carrera. Ese fue el objetivo." – Norris
            </span>
            <a href="#story/3173417/slide-4"></a>
          </div>
  
          <!-- Slide 3: Trayectoria individual - Piastri  -->
          <div class="recto izq">
            <p>
              <span>Oscar Piastri: El joven que desafió a los grandes</span> En su segunda temporada, Oscar demostró que no era solo una promesa, sino una realidad. Con una madurez sorprendente para su edad, se convirtió en el compañero ideal de Lando, aportando frescura y agresividad a la pista. <br>
            </p>
            <a href="#story/3173417/slide-5"></a>
          </div>
          <div class="recto izq citaBox">
            <span>
              "Cada carrera es una oportunidad para aprender y crecer." – Piastri
            </span>
            <a href="#story/3173417/slide-5"></a>
          </div>
        </div>
      </div>
      <div class="map">
        <h1>El Circuito Global</h1>
        <p>Un recorrido por los circuitos que definieron la temporada 2024, donde cada curva y recta se convirtieron en el escenario de batallas épicas entre los pilotos.</p>
        <div class="flourish-embed flourish-webgl" data-src="visualisation/23822499">
          <script src="https://public.flourish.studio/resources/embed.js"></script><noscript>
          <img src="https://public.flourish.studio/visualisation/23822499/thumbnail" width="100%" alt="webgl visualization" /></noscript>
        </div>
      </div>

      <div class="three">

        <h1>El Pulso de la Velocidad</h1>
        <p> McLaren demostró su supremacía en la pista con sus <strong>vueltas rápidas</strong>, marcando tiempos que dejaron atrás a sus competidores. La precisión y velocidad del MCL38 redefinieron los límites de la Fórmula 1 en 2024.</p>
        
        <div class="timer-container">
          <h2 id="main-timer">0:00.000</h2>
        </div>
        <div class="top-section">
          <svg viewBox="0 0 600 600"></svg>
          <div class="labels" id="labels"></div>
        </div>
      </div>

      
      <div class="four">
        <h1>Cuando Cada Décima Cuenta, Los Pit Stops</h1>

        <p>
          En la Fórmula 1, cada segundo es una eternidad. 
          <strong>La temporada 2024</strong> nos mostró que la diferencia entre el primer y el último lugar puede ser de apenas unos segundos.
          Aquí, los equipos luchan no solo por la victoria, sino por cada punto, cada posición en la parrilla.
        </p> 
        <div class="bottom-section">
          <div class="circles-grid" id="circlesGrid"></div>
        </div>
        <script src="utils.js"></script>

      </div>

      <div class="seven">
        <h1> Y... ¿dónde quedamos hoy en día?</h1> 
        <p>Un vistazo a la historia: las posiciones de las escuderías a lo largo de los años, reflejando su legado y desempeño en el campeonato de constructores.</p>

        <div
          class="flourish-embed"
          data-src="story/3176099"
          data-url="https://flo.uri.sh/story/3176099/embed"
          data-height="100vh"
        >
        <script src="https://public.flourish.studio/resources/embed.js"></script>
        </div>
      </div>

      <div class="pregunta-final">
        <h1>¿Cómo seguirá <span>McLaren</span> en la temporada 2025?</h1>
        <div class="video">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/UiDKAbCisTQ?si=ggLFa6-a0teIWybC" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        </div>
      </div>

    </div>
  

  <footer>
      <ul id="nombres">
          <li class="sol">Sol <br>Camus</li>
          <li class="ceci">Cecilia <br>Chen</li>
          <li class="kia">Kiara <br>Martinez</li>
      </ul>
      <p id="anio">1<sup>er</sup> semestre - 2025<br>
      Visualización de Datos</p>
  </footer>
    <script src ="utils.js"></script>
    <!-- Agregar la libreria (antes de tu javascript) que hara posible el paso de los textos al scrollear -->
    <script src="https://cdn.flourish.rocks/flourish-scrolly-v3.1.0.min.js" type="text/javascript"></script>
    <!-- En este index.js esta el javascript para activar los botones de los videos de Messi -->
    <script src="index.js"></script>
    <!-- En este slider.js este el javascript para activar el swipe izquierda/derecha en mobile. Para verlo achicar la pantalla a menos de 600px -->
    <script src="slider.js"></script>
    <!-- Inicializa la biblioteca para convertir tu historia en magia de desplazamiento -->
    <script type="text/javascript">initFlourishScrolly()</script>
</body>
</html>
