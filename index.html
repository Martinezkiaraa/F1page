<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="icon" href="logo-F1.png" type="image/x-icon">
    <title>Trabajo Final - Visualizaci√≥n de Datos</title>
</head>
<header>
  <iframe class ="background" style="border: 1px solid rgba(0, 0, 0, 0.1);" width="800" height="450" src="https://embed.figma.com/proto/Sp1SDiGeC9C7nYFv9XyH6x/Visualizaci%C3%B3n-de-Datos?page-id=295%3A93&node-id=383-172&p=f&viewport=-1495%2C-3362%2C0.76&scaling=contain&content-scaling=fixed&starting-point-node-id=383%3A2&embed-host=share" allowfullscreen></iframe>
</header>
<body>
  <h1 style="font-size: 80px; text-align: center; margin-top: 40px;">
    <span style="color: #FF0000;">Temporada 2024:</span> <br>
    El A√±o de <span style="color: #FF8000;">McLaren</span>
  </h1>
  
    <div class="container">
      <div class="one">
        <h1>Los Protagonistas</h1>
        <div class="tarjetas"></div>
      </div>
      <div class="two">
        <h1>Los Equipos</h1>
        <div id="burbujas">
          <div
            class="flourish-embed"
            data-src="story/3173417"
            data-url="https://flo.uri.sh/story/3173417/embed"
            data-height="100vh"
          >
          <script src="https://public.flourish.studio/resources/embed.js"></script>
          </div>
  
          <!-- Slide 1: Victoria de McLaren -->
          <p style="font-family: 'Canva Sans Variable', sans-serif; font-size: 24px; line-height: 1.8;">
            <strong style="color: #FF8000;">La temporada 2024 qued√≥ marcada en naranja papaya</strong>, el color del renacimiento.
            McLaren volvi√≥ a reinar tras m√°s de una d√©cada de sequ√≠a, destronando a gigantes como Red Bull y Ferrari.
            <br><br>
            <strong>6 victorias, 21 podios y 666 puntos</strong> sellaron un campeonato inolvidable para la escuder√≠a brit√°nica.
            <a href="#story/3173417/slide-1"></a>
          </p>
          
          <!-- Slide 2: Protagonistas - Equipo McLaren -->
          <div class="recto izq">
        <p>
          <span style="font-family: 'Canva Sans Variable', sans-serif; font-size: bold;">McLaren: una dupla explosiva</span>. 
          Bajo la direcci√≥n de Andrea Stella y el avance t√©cnico del <strong>MCL38</strong>, 
          el equipo encontr√≥ el balance perfecto entre velocidad y fiabilidad. 
          <br><span style="color: #FF8000;">M√°s del 85% de las carreras puntuaron con ambos autos</span>, 
          consolidando una estrategia de equipo que no dej√≥ margen a errores.
        </p>
        <a href="#story/3173417/slide-2"></a>
      </div>
  
          <!-- Slide 3: Trayectoria individual - Norris -->
          <p>
            <span>Lando Norris: La consagraci√≥n de un talento</span>. Desde su debut en 2019, Lando hab√≠a mostrado destellos de genialidad. Pero fue en 2024 cuando, finalmente, todo se aline√≥. Constancia, agresividad inteligente y madurez emocional lo convirtieron en un referente indiscutido.
            <span class="conFondo">"Mejorar cada vuelta, cada carrera. Ese fue el objetivo." ‚Äì Norris</span>
            <a href="#story/3173417/slide-3"></a>
          </p>
  
          <!-- Slide 3: Trayectoria individual - Piastri -->
          <div class="recto der">
            <p>
              <span>Oscar Piastri: El joven que desafi√≥ a los grandes</span>. En solo su segundo a√±o en F1, el australiano mostr√≥ un temple y control sorprendentes. Su crecimiento fue mete√≥rico, aportando puntos vitales y presionando incluso a los favoritos en pista.
            </p>
            <a href="#story/3173417/slide-3"></a>
          </div>
        </div>

      <section class="three">
        <h1> ¬øQu√© paso durante la temporada?</h1>
      </section>
      <section class="four">
        <h1> Hablemos de todos</h1>
      </section>
      <section class="five">
        <h1> ¬øEl m√°s r√°pido gana...?</h1>
        <div class="vueltas">
          <svg viewBox="0 0 420 420" id="svg">
            <!-- C√≠rculos generados por JS -->
          </svg>
          <div class="counter" id="counter">0s</div>
        </div>
      </section>
      <section class="six">
        <h1> Pit Stops</h1>
      </section>
      <div class="seven">
        <h1> Y... ¬ød√≥nde quedamos?</h1>
        <div
          class="flourish-embed"
          data-src="story/3176099"
          data-url="https://flo.uri.sh/story/3176099/embed"
          data-height="100vh"
        >
        <script src="https://public.flourish.studio/resources/embed.js"></script>
        </div>
      </div>
    </div>
  
    <footer></footer>
    <script>
      const svg = document.getElementById('svg');
  const counter = document.getElementById('counter');

  const totalCircles = 10;
  const baseDuration = 10; // en segundos (para el c√≠rculo m√°s externo)
  const stepDuration = 4;  // m√°s duraci√≥n cuanto m√°s adentro
  const stepBetween = 30;
  const minRadius = 50;
  const maxRadius = minRadius + (totalCircles - 1) * stepBetween;

  const centerX = 210;
  const centerY = 210;

  const circles = [];

  for (let i = 0; i < totalCircles; i++) {
    const radius = maxRadius - i * stepBetween;
    const duration = baseDuration + (totalCircles - 1 - i) * stepDuration;

    const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    circle.setAttribute("cx", centerX);
    circle.setAttribute("cy", centerY);
    circle.setAttribute("r", radius);
    circle.setAttribute("stroke", i === totalCircles - 1 ? "#FF9800" : "#ccc");

    svg.appendChild(circle);

    const circumference = 2 * Math.PI * radius;
    circle.style.strokeDasharray = `${circumference}`;
    circle.style.strokeDashoffset = circumference;

    circles.push({ element: circle, duration, circumference, startTime: null });
  }

  // ‚è± CONTADOR num√©rico (independiente)
  let seconds = 0;
  counter.textContent = `${seconds}s`;
  const counterInterval = setInterval(() => {
    seconds++;
    counter.textContent = `${seconds}s`;
  }, 100);

  // üåÄ ANIMACI√ìN de c√≠rculos (independiente)
  function animateCircles(timestamp) {
    let allDone = true;

    circles.forEach(circle => {
      if (!circle.startTime) circle.startTime = timestamp;

      const elapsed = (timestamp - circle.startTime) / 1000; // en segundos
      const progress = Math.min(elapsed / circle.duration, 1);
      const offset = circle.circumference * (1 - progress);

      circle.element.style.strokeDashoffset = offset;

      if (progress < 1) allDone = false;
    });

    if (!allDone) {
      requestAnimationFrame(animateCircles);
    } else {
      clearInterval(counterInterval); // detener el contador si quer√©s
    }
  }

  requestAnimationFrame(animateCircles);

      const sections = document.querySelectorAll("section");
    
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      }, {
        threshold: 0.25 // cuando al menos el 25% de la secci√≥n sea visible
      });
    
      sections.forEach(section => {
        observer.observe(section);
      });
    </script>
    <!-- Agregar la libreria (antes de tu javascript) que hara posible el paso de los textos al scrollear -->
    <script src="https://cdn.flourish.rocks/flourish-scrolly-v3.1.0.min.js" type="text/javascript"></script>
    <!-- En este index.js esta el javascript para activar los botones de los videos de Messi -->
    <script src="index.js"></script>
    <!-- En este slider.js este el javascript para activar el swipe izquierda/derecha en mobile. Para verlo achicar la pantalla a menos de 600px -->
    <script src="slider.js"></script>
    <!-- Inicializa la biblioteca para convertir tu historia en magia de desplazamiento -->
    <script type="text/javascript">initFlourishScrolly()</script>
</body>
</html>
